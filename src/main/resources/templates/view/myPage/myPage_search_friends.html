<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
	integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
	crossorigin="anonymous"></script>
<!-- bootstrap 4.3.1 -->
<link rel="stylesheet" href="../../css/vendor/bootstrap.min.css">
<!-- styles -->
<link rel="stylesheet" href="../../css/styles.min.css">
<!-- simplebar styles -->
<link rel="stylesheet" href="../../css/vendor/simplebar.css">
<!-- tiny-slider styles -->
<link rel="stylesheet" href="../../css/vendor/tiny-slider.css">
<!-- favicon -->
<link rel="icon" href="img/favicon.ico">
<title>Vikinger | Profile</title>
</head>
<style>
.addBtn {
	background-color: #14e36e;
	color: white;
}
</style>
<body>
<div th:insert="/view/fragments/header.html :: header"></div>
	<!-- CONTENT GRID -->
	<div class="content-grid">
		<!-- PROFILE HEADER -->
		<div class="profile-header">
			<!-- PROFILE HEADER COVER -->
			<figure class="profile-header-cover liquid" th:if="${userBackCheck}=='Y'">
				<img th:src="@{/user/background/}+${uno}" alt="cover-01">
			</figure>
			<figure class="profile-header-cover liquid" th:unless="${userBackCheck}=='Y'">
				<img src="../../img/user_baseBack.png" alt="cover-01">
			</figure>
			<!-- /PROFILE HEADER COVER -->

			<!-- PROFILE HEADER INFO -->
			<div class="profile-header-info">
				<!-- USER SHORT DESCRIPTION -->
				<div class="user-short-description big">
					<!-- USER SHORT DESCRIPTION AVATAR -->
					<a class="user-short-description-avatar user-avatar big"
						href="profile-timeline.html"> <!-- USER AVATAR BORDER -->
						<div class="user-avatar-border">
							<!-- HEXAGON -->
							<div class="hexagon-148-164"></div>
							<!-- /HEXAGON -->
						</div>
						<!-- /USER AVATAR BORDER -->
						
						<!-- USER AVATAR CONTENT -->
						<div class="user-avatar-content">
							<!-- HEXAGON -->
							<figure th:if="${userFileCheck}=='Y'">
								<div class="hexagon-image-100-110" th:attr="data-src=@{/user/profile/}+${uno}"></div>
							</figure>
							<figure th:unless="${userFileCheck}=='Y'">
								<div class="hexagon-image-100-110" data-src="../../img/user_baseProfile.png"></div>
							</figure>
							<!-- /HEXAGON -->
						</div>
						<!-- /USER AVATAR CONTENT -->
						
						<!-- USER AVATAR PROGRESS -->
						<div class="user-avatar-progress">
							<!-- HEXAGON -->
							<div class="hexagon-progress-124-136"></div>
							<!-- /HEXAGON -->
						</div>
						<!-- /USER AVATAR PROGRESS -->
						
						<!-- USER AVATAR PROGRESS BORDER -->
						<div class="user-avatar-progress-border">
							<!-- HEXAGON -->
							<div class="hexagon-border-124-136"></div>
							<!-- /HEXAGON -->
						</div>
						<!-- /USER AVATAR PROGRESS BORDER -->	
					</a>
					<!-- /USER SHORT DESCRIPTION AVATAR -->

					<!-- USER SHORT DESCRIPTION AVATAR -->
					<a
						class="user-short-description-avatar user-short-description-avatar-mobile user-avatar medium"
						href="profile-timeline.html"> <!-- USER AVATAR BORDER -->
						<div class="user-avatar-border">
							<!-- HEXAGON -->
							<div class="hexagon-120-132"></div>
							<!-- /HEXAGON -->
						</div> <!-- /USER AVATAR BORDER --> <!-- USER AVATAR CONTENT -->
						<div class="user-avatar-content">
							<!-- HEXAGON -->
							<div class="hexagon-image-82-90" data-src="img/avatar/01.jpg"></div>
							<!-- /HEXAGON -->
						</div> <!-- /USER AVATAR CONTENT --> <!-- USER AVATAR PROGRESS -->
						<div class="user-avatar-progress">
							<!-- HEXAGON -->
							<div class="hexagon-progress-100-110"></div>
							<!-- /HEXAGON -->
						</div> <!-- /USER AVATAR PROGRESS --> <!-- USER AVATAR PROGRESS BORDER -->
						<div class="user-avatar-progress-border">
							<!-- HEXAGON -->
							<div class="hexagon-border-100-110"></div>
							<!-- /HEXAGON -->
						</div> <!-- /USER AVATAR PROGRESS BORDER -->
					</a>
					<!-- /USER SHORT DESCRIPTION AVATAR -->

					<!-- USER SHORT DESCRIPTION TITLE -->
					<p class="user-short-description-title">
						<a th:text="${userId}"></a>
					</p>
					<!-- /USER SHORT DESCRIPTION TITLE -->

					<!-- USER SHORT DESCRIPTION TEXT -->
					<p class="user-short-description-text">
						<a th:text="${#dates.format(userBirthdate, 'yyyy-MM-dd')}"></a>
					</p>
					<!-- /USER SHORT DESCRIPTION TEXT -->
				</div>
				<!-- /USER SHORT DESCRIPTION -->

				<!-- PROFILE HEADER SOCIAL LINKS WRAP -->
				<div class="profile-header-social-links-wrap">
					<!-- PROFILE HEADER SOCIAL LINKS -->
					<div id="profile-header-social-links-slider"
						class="profile-header-social-links">
						<div class="profile-header-social-link">
							<!-- SOCIAL LINK -->
							<a class="social-link facebook" href="#"> <!-- ICON FACEBOOK -->
								<svg class="icon-facebook">
				                	<use xlink:href="#svg-facebook"></use>
				                </svg> <!-- /ICON FACEBOOK -->
							</a>
							<!-- /SOCIAL LINK -->
						</div>

						<div class="profile-header-social-link">
							<!-- SOCIAL LINK -->
							<a class="social-link twitter" href="#"> <!-- ICON TWITTER -->
								<svg class="icon-twitter">
				                	<use xlink:href="#svg-twitter"></use>
				                </svg> <!-- /ICON TWITTER -->
							</a>
							<!-- /SOCIAL LINK -->
						</div>

						<div class="profile-header-social-link">
							<!-- SOCIAL LINK -->
							<a class="social-link instagram" href="#"> <!-- ICON INSTAGRAM -->
								<svg class="icon-instagram">
				                	<use xlink:href="#svg-instagram"></use>
				                </svg> <!-- /ICON INSTAGRAM -->
							</a>
							<!-- /SOCIAL LINK -->
						</div>

						<div class="profile-header-social-link">
							<!-- SOCIAL LINK -->
							<a class="social-link twitch" href="#"> <!-- ICON TWITCH -->
								<svg class="icon-twitch">
				                	<use xlink:href="#svg-twitch"></use>
				                </svg> <!-- /ICON TWITCH -->
							</a>
							<!-- /SOCIAL LINK -->
						</div>

						<div class="profile-header-social-link">
							<!-- SOCIAL LINK -->
							<a class="social-link youtube" href="#"> <!-- ICON YOUTUBE -->
								<svg class="icon-youtube">
				                	<use xlink:href="#svg-youtube"></use>
				                </svg> <!-- /ICON YOUTUBE -->
							</a>
							<!-- /SOCIAL LINK -->
						</div>

						<div class="profile-header-social-link">
							<!-- SOCIAL LINK -->
							<a class="social-link patreon" href="#"> <!-- ICON PATREON -->
								<svg class="icon-patreon">
				                	<use xlink:href="#svg-patreon"></use>
				                </svg> <!-- /ICON PATREON -->
							</a>
							<!-- /SOCIAL LINK -->
						</div>

						<div class="profile-header-social-link">
							<!-- SOCIAL LINK -->
							<a class="social-link discord" href="#"> <!-- ICON DISCORD -->
								<svg class="icon-discord">
				                	<use xlink:href="#svg-discord"></use>
				                </svg> <!-- /ICON DISCORD -->
							</a>
							<!-- /SOCIAL LINK -->
						</div>
					</div>
					<!-- /PROFILE HEADER SOCIAL LINKS -->

					<!-- SLIDER CONTROLS -->
					<div id="profile-header-social-links-slider-controls"
						class="slider-controls">
						<!-- SLIDER CONTROL -->
						<div class="slider-control left">
							<!-- SLIDER CONTROL ICON -->
							<svg class="slider-control-icon icon-small-arrow">
				                <use xlink:href="#svg-small-arrow"></use>
				            </svg>
							<!-- /SLIDER CONTROL ICON -->
						</div>
						<!-- /SLIDER CONTROL -->

						<!-- SLIDER CONTROL -->
						<div class="slider-control right">
							<!-- SLIDER CONTROL ICON -->
							<svg class="slider-control-icon icon-small-arrow">
				                <use xlink:href="#svg-small-arrow"></use>
				            </svg>
							<!-- /SLIDER CONTROL ICON -->
						</div>
						<!-- /SLIDER CONTROL -->
					</div>
					<!-- /SLIDER CONTROLS -->
				</div>
				<!-- /PROFILE HEADER SOCIAL LINKS WRAP -->

				<!-- USER STATS -->
				<div class="user-stats">
					<!-- USER STAT -->
					<div class="user-stat big">
						<!-- USER STAT TITLE -->
						<p class="user-stat-title" th:text="${countPost}"></p>
						<!-- /USER STAT TITLE -->

						<!-- USER STAT TEXT -->
						<p class="user-stat-text">게시글</p>
						<!-- /USER STAT TEXT -->
					</div>
					<!-- /USER STAT -->

					<!-- USER STAT -->
					<div class="user-stat big">
						<!-- USER STAT TITLE -->
						<p class="user-stat-title" th:text="${count}"></p>
						<!-- /USER STAT TITLE -->

						<!-- USER STAT TEXT -->
						<p class="user-stat-text">친구</p>
						<!-- /USER STAT TEXT -->
					</div>
					<!-- /USER STAT -->
				</div>
				<!-- /USER STATS -->
			</div>
			<!-- /PROFILE HEADER INFO -->
		</div>
		<!-- /PROFILE HEADER -->

		<!-- SECTION NAVIGATION -->
		<div th:insert="/view/myPage/section_navigation.html :: section-navi"></div>
		<!-- /SECTION NAVIGATION -->

		<!-- SECTION -->
		<section class="section">
			<!-- SECTION HEADER -->
			<div class="section-header">
				<!-- SECTION HEADER INFO -->
				<div class="section-header-info">
					<!-- SECTION TITLE -->
					<h2 class="section-title">
						Friends <span class="highlighted" th:text="${count}"></span>
					</h2>
					<!-- /SECTION TITLE -->
				</div>
				<!-- /SECTION HEADER INFO -->
			</div>
			<!-- /SECTION HEADER -->

			<!-- SECTION FILTERS BAR -->
			<div class="section-filters-bar v1">
				<!-- SECTION FILTERS BAR ACTIONS -->
				<div class="section-filters-bar-actions">
					<!-- FORM -->
					<form class="form" action="/mySearchFriends" method="post">
						<!-- FORM INPUT -->
						<div class="form-input small with-button">
							<input type="hidden" th:value="${uno}" name="uno">
							<label for="friends-search"></label> <input
								type="text" id="friends-search" name="friends_search">
							<!-- BUTTON -->
							<button class="button primary">
								<!-- ICON MAGNIFYING GLASS -->
								<svg class="icon-magnifying-glass">
				                	<use xlink:href="#svg-magnifying-glass"></use>
				                </svg>
								<!-- /ICON MAGNIFYING GLASS -->
							</button>
							<!-- /BUTTON -->
						</div>
						<!-- /FORM INPUT -->
					</form>
					<!-- /FORM -->

					<!-- FILTER TABS -->
					<div class="filter-tabs">
						<!-- FILTER TAB -->
						<div id="myFriendList" class="filter-tab"
							th:onclick="'location.href=\'myFriends/'+ @{${user.userId}} + '\''" >
							<!-- FILTER TAB TEXT -->
							<p class="filter-tab-text">친구 목록</p>
							<!-- /FILTER TAB TEXT -->
						</div>
						<!-- FILTER TAB -->
						<div id="newFriendList" class="filter-tab active"
							onclick="location.href='mySearchFriends'">
							<!-- FILTER TAB TEXT -->
							<p class="filter-tab-text">새 친구 찾기</p>
							<!-- /FILTER TAB TEXT -->
						</div>
						<!-- /FILTER TAB -->
						<!-- FILTER TAB -->
						<div id="newFriendList" class="filter-tab"
							onclick="location.href='applyList'">
							<!-- FILTER TAB TEXT -->
							<p class="filter-tab-text">신청 목록 [<span th:text="${applyCount}"></span>]</p>
							<!-- /FILTER TAB TEXT -->
						</div>
						<!-- /FILTER TAB -->
						
						<!-- FILTER TAB -->
						<div id="newFriendList" class="filter-tab"
							onclick="location.href='receiveList'">
							<!-- FILTER TAB TEXT -->
							<p class="filter-tab-text">신청 받은 목록 [<span th:text="${receiveCount}"></span>]</p>
							<!-- /FILTER TAB TEXT -->
						</div>
						<!-- /FILTER TAB -->
					</div>
					<!-- /FILTER TABS -->
				</div>
				<!-- /SECTION FILTERS BAR ACTIONS -->
			</div>
			<!-- /SECTION FILTERS BAR -->

			<!-- GRID -->
			<div class="grid grid-4-4-4 centered">
				<!-- USER PREVIEW -->
				<div class="user-preview" th:each="u:${list}">
					<!-- USER PREVIEW COVER -->
					<figure class="user-preview-cover liquid" th:if="${u.userBackCheck}=='Y'">
						<img th:src="@{/user/background/}+${u.uno}" alt="cover-04">
					</figure>
					<figure class="user-preview-cover liquid" th:unless="${u.userBackCheck}=='Y'">
						<img src="../../img/user_baseBack.png" alt="cover-04">
					</figure>
					<!-- /USER PREVIEW COVER -->

					<!-- USER PREVIEW INFO -->
					<div class="user-preview-info">
						<!-- USER SHORT DESCRIPTION -->
						<div class="user-short-description">
							<!-- USER SHORT DESCRIPTION AVATAR -->
							<a class="user-short-description-avatar user-avatar medium"
								th:href="@{/myPage/}+${u.userId}"> <!-- USER AVATAR BORDER -->
								<div class="user-avatar-border">
									<!-- HEXAGON -->
									<div class="hexagon-120-132"></div>
									<!-- /HEXAGON -->
								</div> <!-- /USER AVATAR BORDER --> <!-- USER AVATAR CONTENT -->
								<div class="user-avatar-content">
									<!-- HEXAGON -->
									<figure th:if="${u.userFileCheck}=='Y'">
										<div class="hexagon-image-82-90" th:attr="data-src=@{/user/profile/}+${u.uno}"></div>
									</figure>
									<figure th:unless="${u.userFileCheck}=='Y'">
										<div class="hexagon-image-82-90" data-src="@{../../img/user_baseProfile.png"></div>
									</figure>
									<!-- /HEXAGON -->
								</div> <!-- /USER AVATAR CONTENT --> <!-- USER AVATAR PROGRESS -->
								<div class="user-avatar-progress">
									<!-- HEXAGON -->
									<div class="hexagon-progress-100-110"></div>
									<!-- /HEXAGON -->
								</div> <!-- /USER AVATAR PROGRESS --> <!-- USER AVATAR PROGRESS BORDER -->
								<div class="user-avatar-progress-border">
									<!-- HEXAGON -->
									<div class="hexagon-border-100-110"></div>
									<!-- /HEXAGON -->
								</div> <!-- /USER AVATAR PROGRESS BORDER -->
							</a>
							<!-- /USER SHORT DESCRIPTION AVATAR -->
							
							<!-- USER SHORT DESCRIPTION TITLE -->
							<p class="user-short-description-title">
								<a th:href="@{/myPage/}+${u.userId}" th:text="${u.userId}"></a>
							</p>
							<!-- /USER SHORT DESCRIPTION TITLE -->

							<!-- USER SHORT DESCRIPTION TEXT -->
							<p class="user-short-description-text">
								<a th:href="@{/myPage/}+${u.userId}"
									th:text="${#dates.format(u.userBirthdate, 'yyyy-MM-dd')}"></a>
							</p>
							<!-- /USER SHORT DESCRIPTION TEXT -->
						</div>
						<!-- /USER SHORT DESCRIPTION -->

						<!-- USER PREVIEW STATS SLIDES -->
						<div id="user-preview-stats-slides-01"
							class="user-preview-stats-slides">
							<!-- USER PREVIEW STATS SLIDE -->
							<div class="user-preview-stats-slide">
								<!-- USER STATS -->
								<div class="user-stats">
									<!-- USER STAT -->
									<div class="user-stat">
										<!-- USER STAT TITLE -->
										<p class="user-stat-title" th:text="${u.boardCnt}"></p>
										<!-- /USER STAT TITLE -->

										<!-- USER STAT TEXT -->
										<p class="user-stat-text">게시글</p>
										<!-- /USER STAT TEXT -->
									</div>
									<!-- /USER STAT -->

									<!-- USER STAT -->
									<div class="user-stat">
										<!-- USER STAT TITLE -->
										<p class="user-stat-title" th:text="${u.friendCnt}"></p>
										<!-- /USER STAT TITLE -->

										<!-- USER STAT TEXT -->
										<p class="user-stat-text">친구</p>
										<!-- /USER STAT TEXT -->
									</div>
									<!-- /USER STAT -->
								</div>
								<!-- /USER STATS -->
							</div>
							<!-- /USER PREVIEW STATS SLIDE -->
						</div>
						<!-- /USER PREVIEW STATS SLIDES -->

						<!-- USER PREVIEW ACTIONS -->
						<div class="user-preview-actions">
							<!-- BUTTON -->
							<form action="mySearchFriends/apply" method="post" class="button primary">
								<input type="hidden" th:value="${u.uno}" name="receiveUno">
								<input type="hidden" th:value="${userId}" name="applyId">
								<input type="hidden" th:value="${u.userId}" name="receiveId">
								<input type="hidden" th:value="${#dates.format(userBirthdate, 'yyyy-MM-dd')}" name="applyBirthdate">
								<input type="hidden" th:value="${#dates.format(u.userBirthdate, 'yyyy-MM-dd')}" name="receiveBirthdate">								
								<input type="hidden" th:value="${userFileCheck}" name="applyFileCheck">
								<input type="hidden" th:value="${u.userFileCheck}" name="receiveFileCheck">
								<input type="hidden" th:value="${userBackCheck}" name="applyBackCheck">
								<input type="hidden" th:value="${u.userBackCheck}" name="receiveBackCheck">
								<button type="submit" class="addBtn" onclick="href='apply'">친구 신청</button>
							</form>
							<!-- /BUTTON -->
						</div>
						<!-- /USER PREVIEW ACTIONS -->
					</div>
					<!-- /USER PREVIEW INFO -->
				</div>
				<!-- /USER PREVIEW -->
			</div>
			<!-- /GRID -->

			<!-- SECTION PAGER BAR -->
			<div class="section-pager-bar">
				<!-- SECTION PAGER -->
				<div class="section-pager">
					<!-- SECTION PAGER ITEM -->
					<div class="section-pager-item active">
						<!-- SECTION PAGER ITEM TEXT -->
						<p class="section-pager-item-text">01</p>
						<!-- /SECTION PAGER ITEM TEXT -->
					</div>
					<!-- /SECTION PAGER ITEM -->

					<!-- SECTION PAGER ITEM -->
					<div class="section-pager-item">
						<!-- SECTION PAGER ITEM TEXT -->
						<p class="section-pager-item-text">02</p>
						<!-- /SECTION PAGER ITEM TEXT -->
					</div>
					<!-- /SECTION PAGER ITEM -->

					<!-- SECTION PAGER ITEM -->
					<div class="section-pager-item">
						<!-- SECTION PAGER ITEM TEXT -->
						<p class="section-pager-item-text">03</p>
						<!-- /SECTION PAGER ITEM TEXT -->
					</div>
					<!-- /SECTION PAGER ITEM -->

					<!-- SECTION PAGER ITEM -->
					<div class="section-pager-item">
						<!-- SECTION PAGER ITEM TEXT -->
						<p class="section-pager-item-text">04</p>
						<!-- /SECTION PAGER ITEM TEXT -->
					</div>
					<!-- /SECTION PAGER ITEM -->
				</div>
				<!-- /SECTION PAGER -->

				<!-- SECTION PAGER CONTROLS -->
				<div class="section-pager-controls">
					<!-- SLIDER CONTROL -->
					<div class="slider-control left disabled">
						<!-- SLIDER CONTROL ICON -->
						<svg class="slider-control-icon icon-small-arrow">
			            	<use xlink:href="#svg-small-arrow"></use>
			            </svg>
						<!-- /SLIDER CONTROL ICON -->
					</div>
					<!-- /SLIDER CONTROL -->

					<!-- SLIDER CONTROL -->
					<div class="slider-control right">
						<!-- SLIDER CONTROL ICON -->
						<svg class="slider-control-icon icon-small-arrow">
			            	<use xlink:href="#svg-small-arrow"></use>
			            </svg>
						<!-- /SLIDER CONTROL ICON -->
					</div>
					<!-- /SLIDER CONTROL -->
				</div>
				<!-- /SECTION PAGER CONTROLS -->
			</div>
			<!-- /SECTION PAGER BAR -->
		</section>
		<!-- /SECTION -->
	</div>
	<!-- /CONTENT GRID -->
	<script th:inline="javascript" src="jquery-ui.min.js">
	$(document).ready(function(){
		$(window).scroll(function(){
			var scrollHeight = $(window).scrollTop() + $(window).height();
			var documentHeight = $(document).height();
			
			if(scrollHeight == documentHeight){
				$.ajax({
					type:"GET",
					url:""
				})
			}
		});
	});
	/*var result = '${msg}';
	
	 if(result="success"){
		alert(result);
		console.log(result);
	} */
	
	
	
	var lastScrollTop = 0;
	var easeEffect = 'easeInQuint';
	
	// 1. 스크롤 이벤트 발생
	$(window).scroll(function(){ // ① 스크롤 이벤트 최초 발생
		
		var currentScrollTop = $(window).scrollTop();
		
		/*  
			=================	다운 스크롤인 상태	================
		*/
		if( currentScrollTop - lastScrollTop > 0 ){			
			if ($(window).scrollTop() >= ($(document).height() - $(window).height()) ){				
				// 3. class가 scrolling인 것의 요소 중 마지막인 요소를 선택한 다음 그것의 data-bno속성 값을 받아온다.
				//		즉, 현재 뿌려진 게시글의 마지막 bno값을 읽어오는 것이다.( 이 다음의 게시글들을 가져오기 위해 필요한 데이터이다.)
				var lastbno = $(".scrolling:last").attr("data-bno");
				
				// 4. ajax를 이용하여 현재 뿌려진 게시글의 마지막 bno를 서버로 보내어 그 다음 20개의 게시물 데이터를 받아온다. 
				$.ajax({
					type : 'post',	// 요청 method 방식 
					url : 'infiniteScrollDown',// 요청할 서버의 url
					headers : { 
						"Content-Type" : "application/json",
						"X-HTTP-Method-Override" : "POST"
					},
					dataType : 'json', // 서버로부터 되돌려받는 데이터의 타입을 명시하는 것이다.
					data : JSON.stringify({ // 서버로 보낼 데이터 명시 
						bno : lastbno
					}),
					success : function(data){// ajax 가 성공했을시에 수행될 function이다. 이 function의 파라미터는 서버로 부터 return받은 데이터이다.
						
						var str = "";
						
						// 5. 받아온 데이터가 ""이거나 null이 아닌 경우에 DOM handling을 해준다.
						if(data != ""){
							//6. 서버로부터 받아온 data가 list이므로 이 각각의 원소에 접근하려면 each문을 사용한다.
							$(data).each(
								// 7. 새로운 데이터를 갖고 html코드형태의 문자열을 만들어준다.
								function(){
									console.log(this);		
									str +=	"<tr class=" + "'listToChange'" + ">" 
										+	 	"<td class=" +  "'scrolling'" + " data-bno='" + this.bno +"'>"
										+			this.bno
										+		"</td>"
										+		"<td>" + this.title + "</td>"		
										+		"<td>" + this.writer + "</td>"
										+		"<td>" + this.regdate + "</td>"
										+		"<td>" + this.viewcnt + "</td>"
										+ 	"</tr>";
										
							});// each
							// 8. 이전까지 뿌려졌던 데이터를 비워주고, <th>헤더 바로 밑에 위에서 만든 str을  뿌려준다.
							$(".listToChange").empty();// 셀렉터 태그 안의 모든 텍스트를 지운다.						
							$(".scrollLocation").after(str);
								
						}// if : data!=null
						else{ // 9. 만약 서버로 부터 받아온 데이터가 없으면 그냥 아무것도 하지말까..
							alert("더 불러올 데이터가 없습니다.");
						}// else
		
					}// success
				});// ajax
				
				// 여기서 class가 listToChange인 것중 가장 처음인 것을 찾아서 그 위치로 이동하자.
				var position = $(".listToChange:first").offset();// 위치 값
				
				// 이동  위로 부터 position.top px 위치로 스크롤 하는 것이다. 그걸 500ms 동안 애니메이션이 이루어짐.
				$('html,body').stop().animate({scrollTop : position.top }, 600, easeEffect);
	
			}//if : 현재 스크롤의 top 좌표가  > (게시글을 불러온 화면 height - 윈도우창의 height) 되는 순간
			
			// lastScrollTop을 현재 currentScrollTop으로 갱신해준다.
			lastScrollTop = currentScrollTop;
		}// 다운스크롤인 상태
		
		/*  
			=================	업 스크롤인 상태	================
		*/
		else{
			// up- scroll : 현재 게시글 이전의 글을 불러온다.
			console.log("up-scroll");			

			// 2. 현재 스크롤의 top 좌표가  <= 0 되는 순간
			if ($(window).scrollTop() <= 0 ){ // 
				
				// 3. class가 scrolling인 것의 요소 중 첫 번째 요소를 선택한 다음 그것의 data-bno속성 값을 받아온다.
				//		즉, 현재 뿌려진 게시글의 첫 번째 bno값을 읽어오는 것이다.( 이 전의 게시글들을 가져오기 위해 필요한 데이터이다.)
				var firstbno = $(".scrolling:first").attr("data-bno");
				
				// 4. ajax를 이용하여 현재 뿌려진 게시글의 첫 번째 bno를 서버로 보내어 그 이전의 20개의 게시물 데이터를 받아온다. 
				$.ajax({
					type : 'post',	// 요청 method 방식 
					url : 'infiniteScrollUp',// 요청할 서버의 url
					headers : { 
						"Content-Type" : "application/json",
						"X-HTTP-Method-Override" : "POST"
					},
					dataType : 'json', // 서버로부터 되돌려받는 데이터의 타입을 명시하는 것이다.
					data : JSON.stringify({ // 서버로 보낼 데이터 명시 
						bno : firstbno
					}),
					success : function(data){// ajax 가 성공했을시에 수행될 function이다. 이 function의 파라미터는 서버로 부터 return받은 데이터이다.
						
						var str = "";
						
						// 5. 받아온 데이터가 ""이거나 null이 아닌 경우에 DOM handling을 해준다.
						// 이때 서버에서 값이 없으면 null을 던질줄 알았는데 ""를 던진다. 따라서 (data != null) 이라는 체크를 해주면 안되고, (data != "") 만 해주어야한다.
						// 이건아마 컨트롤러의 리턴타입이 @ResponseBody로 json형태로 던져지는데 이때 아마 아무것도 없는게 ""로 명시되어 날아오는것 같다.
						if(data != ""){
							
							//6. 서버로부터 받아온 data가 list이므로 이 각각의 원소에 접근하려면 each문을 사용한다.
							$(data).each(
								// 7. 새로운 데이터를 갖고 html코드형태의 문자열을 만들어준다.
								function(){
									console.log(this);		
									str +=	"<tr class=" + "'listToChange'" + ">" 
										+	 	"<td class=" +  "'scrolling'" + " data-bno='" + this.bno +"'>"
										+			this.bno
										+		"</td>"
										+		"<td>" + this.title + "</td>"		
										+		"<td>" + this.writer + "</td>"
										+		"<td>" + this.regdate + "</td>"
										+		"<td>" + this.viewcnt + "</td>"
										+ 	"</tr>";
										
							});// each
							// 8. 이전까지 뿌려졌던 데이터를 비워주고, <th>헤더 바로 밑에 위에서 만든 str을  뿌려준다.
							$(".listToChange").empty();// 셀렉터 태그 안의 모든 텍스트를 지운다.						
							$(".scrollLocation").after(str);
								
						}//if : data != ""
						else{ // 9. 만약 서버로 부터 받아온 데이터가 없으면 그냥 아무것도 하지말까..??
							
							alert("더 불러올 데이터가 없습니다.");
						}// else
	
					}// success
				});// ajax
				
				// 스크롤 다운이벤트 때  ajax통신이 발생하지 않을때 까지의 좌표까지 스크롤을 내려가주기. 
				var position =($(document).height() - $(window).height()) -10;
				
				// 이동  위로 부터 position.top px 위치로 스크롤 하는 것이다. 그걸 500ms 동안 애니메이션이 이루어짐.
				$('html,body').stop().animate({scrollTop : position}, 600, easeEffect);
				
			}//if : 현재 스크롤의 top 좌표가  <= 0 되는 순간
		
			// lastScrollTop을 현재 currentScrollTop으로 갱신해준다.
			lastScrollTop = currentScrollTop;
		}// else : 업 스크롤인 상태
		
});// scroll event

	</script>
	<!-- app -->
	<script src="../../js/utils/app.js"></script>
	<!-- page loader -->
	<script src="../../js/utils/page-loader.js"></script>
	<!-- simplebar -->
	<script src="../../js/vendor/simplebar.min.js"></script>
	<!-- liquidify -->
	<script src="../../js/utils/liquidify.js"></script>
	<!-- XM_Plugins -->
	<script src="../../js/vendor/xm_plugins.min.js"></script>
	<!-- tiny-slider -->
	<script src="../../js/vendor/tiny-slider.min.js"></script>
	<!-- global.hexagons -->
	<script src="../../js/global/global.hexagons.js"></script>
	<!-- global.tooltips -->
	<script src="../../js/global/global.tooltips.js"></script>
	<!-- header -->
	<script src="../../js/header/header.js"></script>
	<!-- sidebar -->
	<script src="../../js/sidebar/sidebar.js"></script>
	<!-- content -->
	<script src="../../js/content/content.js"></script>
	<!-- form.utils -->
	<script src="../../js/form/form.utils.js"></script>
	<!-- SVG icons -->
	<script src="../../js/utils/svg-loader.js"></script>
</body>
</html>