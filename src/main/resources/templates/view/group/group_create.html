<!DOCTYPE html>
<html lang="ko" data-textdirection="ltr" class="loading">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
<meta name="description"
	content="Robust admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
<meta name="keywords"
	content="admin template, robust admin template, dashboard template, flat admin template, responsive admin template, web app">
<meta name="author" content="PIXINVENT">
<title>Register Page - Robust Free Bootstrap Admin Template</title>
<link rel="apple-touch-icon" sizes="60x60"
	href="../../app-assets/images/ico/apple-icon-60.png">
<link rel="apple-touch-icon" sizes="76x76"
	href="../../app-assets/images/ico/apple-icon-76.png">
<link rel="apple-touch-icon" sizes="120x120"
	href="../../app-assets/images/ico/apple-icon-120.png">
<link rel="apple-touch-icon" sizes="152x152"
	href="../../app-assets/images/ico/apple-icon-152.png">
<link rel="shortcut icon" type="image/x-icon"
	href="../../app-assets/images/ico/favicon.ico">
<link rel="shortcut icon" type="image/png"
	href="../../app-assets/images/ico/favicon-32.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<!-- BEGIN VENDOR CSS-->
<link rel="stylesheet" type="text/css"
	href="../../app-assets/css/bootstrap.css">
<!-- font icons-->
<link rel="stylesheet" type="text/css"
	href="../../app-assets/fonts/icomoon.css">
<link rel="stylesheet" type="text/css"
	href="../../app-assets/fonts/flag-icon-css/css/flag-icon.min.css">
<link rel="stylesheet" type="text/css"
	href="../../app-assets/vendors/css/extensions/pace.css">
<!-- END VENDOR CSS-->
<!-- BEGIN ROBUST CSS-->
<link rel="stylesheet" type="text/css"
	href="../../app-assets/css/bootstrap-extended.css">
<link rel="stylesheet" type="text/css"
	href="../../app-assets/css/app.css">
<link rel="stylesheet" type="text/css"
	href="../../app-assets/css/colors.css">
<!-- END ROBUST CSS-->
<!-- BEGIN Page Level CSS-->
<link rel="stylesheet" type="text/css"
	href="../../app-assets/css/core/menu/menu-types/vertical-menu.css">
<link rel="stylesheet" type="text/css"
	href="../../app-assets/css/core/menu/menu-types/vertical-overlay-menu.css">
<link rel="stylesheet" type="text/css"
	href="../../app-assets/css/pages/login-register.css">
<!-- END Page Level CSS-->
<!-- BEGIN Custom CSS-->
<link rel="stylesheet" type="text/css" href="../../assets/css/style.css">
<!-- END Custom CSS-->
<link rel="stylesheet"
	href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script text="text/javascript">
	window.onload = function() {
		$('#img_border').hide();
		var change = false;
		function removeInput(){
			if(change){
				$('#input_self').remove();
				$('#self_button').remove();
				change = true;
			}
		}
		$('#goal_down').change(function(){
			var self = $('#goal_down').val();
			if(self == "2week"){
				removeInput();
				var date = getDate(0, 0, 14); 
				$('#g_goaldate').val(date);
			} else if(self == "1month"){
				removeInput();
				var date = getDate(0, 1, 0);
				$('#g_goaldate').val(date);
			} else if(self == "3month"){
				removeInput();
				var date = getDate(0, 3, 0);
				$('#g_goaldate').val(date);
			} else if(self == "6month"){
				removeInput();
				var date = getDate(0, 6, 0);
				$('#g_goaldate').val(date);
			} else if(self == "1year"){
				removeInput();
				var date = getDate(1, 0, 0);
				$('#g_goaldate').val(date);
			} else if(self == "input_self"){
				$('#goal_input').append('<p>')
				$('#goal_input').append('<input type="text" id="input_self" style="display:inline-block; width:74%;" class="form-control" placeholder="원하는 일수를 입력해주세요">');
				$('#goal_input').append('<button type="button" id="self_button" class="btn btn-success btn-min-width ml-3 md-1">확인</button>');
				$('#self_button').click(function(){				
					var input_value = $('#input_self').val();
					if(input_value==""){
							alert("아무것도 입력되지 않았습니다.");
						} else{
							var date = getDate(0, 0, parseInt(input_value));
							$('#g_goaldate').val(date);
						}
					});
				change = true;
			}
		});
		
		$('#add_stats').click(function(){
			$('#stats').append('<input type="text" class="form-control" style="width:46%; display:inline-block;" placeholder="측정할 목표" name="hor_data">&nbsp');
			$('#stats').append('<input type="text" class="form-control" style="width:46%; display:inline-block;" placeholder="달성 목표값" name="data_goal">');
		});
		
		$("#g_profile").change(function(e){
			//div 내용 비워주기
		    $('#img_preview').empty();
			var files = e.target.files;
		    var arr =Array.prototype.slice.call(files);
		      
		    //업로드 가능 파일인지 체크
		    for(var i=0;i<files.length;i++){
		    	if(!checkExtension(files[i].name,files[i].size)){
		        	return false;
		        }
		    }
		    preview(arr);
		});//file change
		function checkExtension(fileName,fileSize){
			var regex = new RegExp("(.*?)\.(exe|sh|zip|alz)$");
		    var maxSize = 20971520;  //20MB
		    if(fileSize >= maxSize){
		    	alert('파일 사이즈 초과');
		        $("input[type='file']").val("");  //파일 초기화
		        return false;
		   	}
		    if(regex.test(fileName)){
		        alert('업로드 불가능한 파일이 있습니다.');
		        $("input[type='file']").val("");  //파일 초기화
		        return false;
		    }
		    return true;
		}
		function preview(arr){
			arr.forEach(function(f){
		    	//파일명이 길면 파일명...으로 처리
		        var fileName = f.name;
		        if(fileName.length > 10){
		        	fileName = fileName.substring(0,7)+"...";
		        }
		        
		        //div에 이미지 추가
		        var str = '<div style="display: inline-flex; padding: 10px;">';
		        
		        //이미지 파일 미리보기
		        if(f.type.match('image.*')){
		        	var reader = new FileReader(); //파일을 읽기 위한 FileReader객체 생성
		          	reader.onload = function (e) { //파일 읽어들이기를 성공했을때 호출되는 이벤트 핸들러
		            	str += '<img src="'+e.target.result+'" title="'+f.name+  '" width=100 height=100 />';
		           		$(str).appendTo('#img_preview');
		        	} 
		        	reader.readAsDataURL(f);
		        }else{
		        	str += '<img src="/resources/img/fileImg.png" title="'+f.name+'" width=100 height=100 />';
		        	$(str).appendTo('#img_preview');
		        }
			});//arr.forEach
			$('#img_border').show();
		}
		
		$('#goal_submit').click(function(e){
			if($('#g_name').val() == ""){
				alert("그룹명을 입력해주세요.");
				return false;
			} else if($('#g_intro').val() == ""){
				alert("그룹 소개글을 입력해주세요.");
				return false;
			} else if($('input[name="g_open"]:checked').length < 1){
				alert("그룹 공개여부를 설정해주세요.");
				return false;
			} else if($('#g_cate').val() == ""){
				alert("그룹 카테고리를 정해주세요.");
				return false;
			} else if($('#g_goaldate').val() == ""){
				alert("목표 달성일을 설정해주세요.");
				return false;
			} 
			this.submit();
		});
		
		function getDate(addYear, addMonth, addDay, token){		//받은 매개변수로 날짜를 추가하는 함수
			token = token == undefined || token == null ? "-" : token;
			addYear = addYear == null ? 0 : addYear;
			addMonth = addMonth == null ? 0 : addMonth;
			addDay = addDay == null ? 0 : addDay;
			var now = new Date();
			var ry = now.getFullYear();
			var rm = now.getMonth() + 1;
			var rd = now.getDate();
			
			if(addYear != 0) { //cal year
				ry = ry + addYear;
			}
			
			if(addMonth != 0) {//cal month
				var isRun = true;
				rm = rm + addMonth;
				while (isRun == true) {
					if(rm > 12){
						ry++;
						rm = rm - 12;
					} else if(rm < 1) {
						ry--;
						rm = 12 + rm;
					}
					
					if(rm > 0 && rm < 13){
						isRun = false;
					}
				}
			}
			var cal = new Date(ry, rm, 0);
			if(rd > cal.getDate())
				rd = cal.getDate();
			if (addDay != 0) {
				rd = rd + addDay;
				if(rd > cal.getDate() || rd < 1) {
					var isRun = true;
					while(isRun == true) {
						if(rd > cal.getDate()) {
							rd = rd - cal.getDate();
							rm++;
							if (rm > 12) {
								ry++;
								rm = 1;
							}
						}
						if(rd < 1) { 
							rm--;
							if(rm < 1) { 
								ry--;
								rm = 12;
							}
							cal = new Date(ry, rm, 0);
							rd = cal.getDate() + rd;
						}
						cal = new Date(ry, rm, 0);
						if(rd <= cal.getDate() && rd >= 1)
							isRun = false;
					}
				}
				if(rd > cal.getDate() || rd < 1) {
					cal = new Date(ry, rm, 0);
				}
			}
				
			if(rm.toString().length < 2) rm = '0' + rm;
			if(rd.toString().length < 2) rd = '0' + rd;
			
			return ry + token + rm + token + rd;
		};
	}
   </script>
</head>
<body data-open="click" data-menu="vertical-menu" data-col="1-column"
	class="vertical-layout vertical-menu 1-column  blank-page blank-page">
	<!-- ////////////////////////////////////////////////////////////////////////////-->
	<div class="app-content content container-fluid">
		<div class="content-wrapper">
			<div class="content-header row"></div>
			<div class="content-body">
				<section class="flexbox-container">
					<div
						class="col-md-6 offset-md-3 col-xs-10 offset-xs-1 box-shadow-2 p-0">
						<div class="card border-grey border-lighten-3 px-2 py-2 m-0">
							<div class="card-header no-border">
								<div class="card-title text-xs-center">
									<img src="../../app-assets/images/logo/robust-logo-dark.png"
										alt="branding logo">
								</div>
								<h6
									class="card-subtitle line-on-side text-muted text-xs-center font-small-3 pt-2">
									<span>그룹 만들기</span>
								</h6>
							</div>
							<div class="card-body collapse in">
								<div class="card-block">
									<form class="form-horizontal form-simple" method="post"
										action="/group_create" enctype="multipart/form-data" novalidate>
										<fieldset
											class="form-group position-relative has-icon-left mb-1">
											<input type="text"
												class="form-control form-control-lg input-lg" id="g_name"
												placeholder="그룹명" name="g_name">
											<div class="form-control-position">
												<i class="icon-head"></i>
											</div>
										</fieldset>
										<div class="form-group"
											style="display: inline-block; width: 40%;">
											<label>그룹 프로필 등록</label><br> <input type="file"
												id="g_profile" accept=".jpg, .jpeg, .png" name="file">
											<div id="img_border"
												style="border: 1px solid black; margin: 10px;">
												<div id="img_preview" src=""></div>
											</div>
										</div>


										<div class="form-group">
											<label>그룹 소개글</label>
											<textarea row="3" class="form-control" id="g_intro"
												placeholder="당신의 그룹을 소개하세요" name="g_intro"></textarea>
										</div>
										<div class="form-group">
											<label>카테고리</label>
											<fieldset class="f">
												<select id="g_cate" name="g_cate" class="form-control">
													<option value="공부">공부</option>
													<option value="운동">운동</option>
													<option value="야외활동">야외활동</option>
													<option value="음악">음악</option>
													<option value="기타">기타</option>
												</select>
											</fieldset>
										</div>
										<div class="form-group">
											<label>공개 여부</label><br> <label
												class="display-inline-block custom-control custom-radio m1-1">
												<input type="radio" id="g_open" name="g_open" value="Y"
												class="custom-control-input"> <span
												class="custom-control-indicator"></span> <label for="g_open"
												class="custom-control-description m1-0">공개</label>
											</label> <label
												class="display-inline-block custom-control custom-radio m1-1">
												<input type="radio" id="g_close" name="g_open" value="N"
												class="custom-control-input"> <span
												class="custom-control-indicator"></span> <label
												for="g_close" class="custom-control-description m1-0">비공개</label>
											</label>
										</div>
										<div class="form-group">
											<label for="projectinput5">목표 달성 일자</label>
											<fieldset id="goal_input" class="f">
												<select id="goal_down" class="form-control">
													<option value="default">입력하기</option>
													<option value="2week">2주</option>
													<option value="1month">1달</option>
													<option value="3month">3달</option>
													<option value="6month">6달</option>
													<option value="1year">1년</option>
													<option value="input_self">직접 입력하기</option>
												</select>
											</fieldset>
											<br> <input type="date" id="g_goaldate"
												class="form-control round" required
												pattern="\d{4}-\d{2}-\d{2}" name="g_goaldate">
										</div>
										<div class="form-group">
											<label for="projectinput5">통계 세부목표 설정</label>
											<fieldset id="stats" class="f">
												<input type="text" class="form-control"
													style="width: 46%; display: inline-block;"
													placeholder="측정할 목표" name="hor_data"> <input
													type="text" class="form-control"
													style="width: 46%; display: inline-block;"
													placeholder="달성 목표값" name="ver_data"> <span
													id="add_stats"
													class="tag tag-default tag-pill bg-success float-xs-right"><i
													class="icon-plus4"></i></span>
											</fieldset>
										</div>
										<button type="submit" id="goal_submit"
											class="btn btn-primary btn-lg btn-block"
											style="display: inline-block; left: 30px;">
											<i class="icon-check2"></i> 만들기
										</button>
									</form>
								</div>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<!-- ////////////////////////////////////////////////////////////////////////////-->

	<!-- BEGIN VENDOR JS-->
	<script src="../../app-assets/js/core/libraries/jquery.min.js"
		type="text/javascript"></script>
	<script src="../../app-assets/vendors/js/ui/tether.min.js"
		type="text/javascript"></script>
	<script src="../../app-assets/js/core/libraries/bootstrap.min.js"
		type="text/javascript"></script>
	<script
		src="../../app-assets/vendors/js/ui/perfect-scrollbar.jquery.min.js"
		type="text/javascript"></script>
	<script src="../../app-assets/vendors/js/ui/unison.min.js"
		type="text/javascript"></script>
	<script src="../../app-assets/vendors/js/ui/blockUI.min.js"
		type="text/javascript"></script>
	<script src="../../app-assets/vendors/js/ui/jquery.matchHeight-min.js"
		type="text/javascript"></script>
	<script src="../../app-assets/vendors/js/ui/screenfull.min.js"
		type="text/javascript"></script>
	<script src="../../app-assets/vendors/js/extensions/pace.min.js"
		type="text/javascript"></script>
	<!-- BEGIN VENDOR JS-->
	<!-- BEGIN PAGE VENDOR JS-->
	<!-- END PAGE VENDOR JS-->
	<!-- BEGIN ROBUST JS-->
	<script src="../../app-assets/js/core/app-menu.js"
		type="text/javascript"></script>
	<script src="../../app-assets/js/core/app.js" type="text/javascript"></script>
	<!-- END ROBUST JS-->
	<!-- BEGIN PAGE LEVEL JS-->
	<!-- END PAGE LEVEL JS-->
</body>
</html>
