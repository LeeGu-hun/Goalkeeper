<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="goal.mapper.BoardMapper">
	<resultMap type="goal.vo.BoardVO" id="boardVO">
		<id property="bno" column="bno"/>
		<id property="uno" column="uno"/>
		<id property="bo_content" column="bo_content"/>
		<id property="bo_title" column="bo_title"/>
		<id property="bo_cate" column="bo_cate"/>
		<id property="bo_group" column="bo_group"/>
		<id property="bo_date" column="bo_date"/>
	<!--<collection property="replyList" column="bno" javaType="java.util.ArrayList" ofType="goal.vo.ReplyVO" select="getReplyListById"/>-->	
	</resultMap>
	<select id="getReplyListById" resultMap="boardVO">
		select * from GK_COMMENT
	</select>
	<select id="searchBoard" resultMap="boardVO" parameterType="goal.vo.BoardVO">
		select bo_content, userid from GK_BOARD 
		where userid like '%' || #{bo_search} || '%' or bo_content like '%' || #{bo_search} || '%'
	</select>
	<insert id="insertBoard" parameterType="goal.vo.BoardVO">
		insert into
		GK_BOARD(bno, userid, bo_content, bo_date, bo_cate, bo_group, uno) values
		(GK_board_SEQ.nextval,#{userId}, #{bo_content}, sysdate, #{bo_cate}, #{bo_group}, #{uno})
	</insert>
	
	<select id="recentBoard" resultMap="boardVO">
		<![CDATA[
		SELECT ROWNUM, BNO FROM (SELECT * FROM GK_BOARD ORDER BY BNO DESC)WHERE ROWNUM <= 1
		]]>
		</select>
		
	<select id="getBoard" parameterType="goal.vo.BoardVO" resultMap="boardVO">
  	 <![CDATA[
   	select u_id, bo_content, bo_DATE, bno, replyWriter, replyContent, replyDate from Gk_BOARD join GK_COMMENT using(bno)
     ]]>
   </select>
   
	<select id="getBoardList" resultMap="boardVO">
		select * from GK_BOARD
	</select>
	
	<select id="selectBoardList" resultMap="boardVO" parameterType="goal.vo.UserVO">
		select * from GK_BOARD where uno=#{uno}
	</select>
</mapper>