<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="goal.mapper.UserMapper">
	
	<resultMap type="goal.vo.UserVO" id="userVO">
		<id property="uno" column="uno"/>
		<id property="userId" column="userId"/>
		<id property="userName" column="userName"/>
		<id property="userPw" column="userPw"/>
		<id property="userMail" column="userMail"/>
		<id property="userPhone" column="userPhone"/>
		<id property="userBirthdate" column="userBirthdate"/>
	</resultMap>
	
	<update id="modifyUserInfo">
	<![CDATA[
		UPDATE GK_USER SET userMail = #{userMail}, userPhone = #{userPhone}, userGender = #{userGender}, userBirthdate= #{userBirthdate}, userPw=#{userPw} WHERE userId = #{userId}
	]]>
	</update>
	
	<select id="read" parameterType="goal.vo.UserVO" resultType="String">
	<![CDATA[
		select userId from GK_USER
		where userId = #{userId} and userPw= #{userPw}
	]]>
	</select>
	<select id="readUser" parameterType="goal.vo.UserVO" resultMap="userVO">
		select * from GK_USER where userId= #{userId} and userPw= #{userPw}
	</select>
	<select id="readId" parameterType="String" resultType="String">
	<![CDATA[
		select userId from GK_USER
		where userId= #{userId}
	]]>
	</select>
	<insert id="register" parameterType="goal.vo.UserVO">
		insert into GK_USER(uno, userId, userName, userPw, userMail, userPhone, userBirthdate) values
		(GK_USER_SEQ.nextval, #{userId}, #{userName}, #{userPw}, #{userMail}, #{userPhone}, #{userBirthdate})
	</insert>
	
	<select id="listFriend" parameterType="goal.vo.UserVO" resultType="goal.vo.UserVO">
      <![CDATA[
         select * from GK_FRIEND where uno=#{uno}
      ]]>
   </select>
   
   
   
	<!-- <select id="getReply" parameterType="goal.vo.ReplyVO" resultMap="replyVO">	
     <![CDATA[
       select * from(select rownum rn, t.* from(select bno, replyWriter ,replyContent ,replyDate from GK_COMMENT where bno = ${bno} ORDER BY replyDate DESC) t) where rn<=2
      ]]>
   </select> -->
	
</mapper>