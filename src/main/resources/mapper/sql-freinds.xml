<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goal.mapper.FriendMapper">
	<resultMap type="goal.vo.FriendVO" id="friendVO">
		<id property="fno" column="fno"></id>
		<id property="uno" column="uno"></id>
		<id property="friendNo" column="friendNo"></id>
		<id property="friendId" column="friendId"></id>
		<id property="friendNumber" column="friendNumber"></id>
		<id property="friendBirthdate" column="friendBirthdate"></id>
		<id property="userFileCheck" column="userFileCheck"></id>
		<id property="userBackCheck" column="userBackCheck"></id>
	</resultMap>
	
	<select id="getlistFriend" resultMap="friendVO" parameterType="goal.vo.FriendVO">
		select * from GK_FRIEND where uno = #{uno}
	</select>
	
	<insert id="addFriend" parameterType="goal.vo.FriendVO">
		insert into GK_FRIEND(fno, uno, friendNo, friendId, friendNumber, friendBirthdate)
		values (GK_FRIEND_SEQ.NEXTVAL, #{uno}, #{friendNo}, #{friendId}, #{friendNumber}, #{friendBirthdate})
	</insert>
	
	<delete id="deleteFriend" parameterType="int">
		delete GK_FRIEND where fno = #{fno}
	</delete>
	
	<select id="findMyFriend" parameterType="java.util.Map" resultMap="friendVO">
		select * from GK_FRIEND where uno = #{uno} and upper(friendId) like '%' || UPPER(#{word}) || '%'
	</select>
	
	<select id="countFriend" parameterType="int" resultType="int">
		select count(*) from GK_FRIEND where uno = #{uno}
	</select>
	
	<update id="profileCheck" parameterType="int">
		update GK_FRIEND set userFileCheck = 'Y' where friendNo = #{uno}
	</update>
	
	<update id="profileBackCheck" parameterType="int">
		update GK_FRIEND set userBackCheck = 'Y' where friendNo = #{uno}
	</update>
</mapper>